# -*- coding: utf-8 -*-
"""
스텝바이스텝 원고 생성을 위한 프롬프트 모음
각 PHASE별로 구조화된 프롬프트 정의
"""

# PHASE 1: 화자 설정 프롬프트
PHASE_1_SPEAKER_PROMPT = """
당신은 SEO 전문 화자 설정 전문가입니다.

주어진 키워드를 분석하여 다음을 생성해주세요:

1. 대분류 카테고리 도출
2. 구체적 화자 페르소나 설정

[키워드]: {keyword}

[분석 과정]
Step 1: 표면 분석
- 제품/서비스명인가?
- 정보 요구형인가?
- 비교/선택형인가?
- 문제 해결형인가?

Step 2: 심층 분석
- 진짜 알고 싶은 것
- 숨은 고민/불안
- 기대하는 결과
- 비용 대비 가치

Step 3: 대분류 도출
키워드 → 소분류 → 중분류 → 대분류

[화자 페르소나 설정]
1. 기본 정보
   - 정확한 나이: "35살" (30대X)
   - 직업/직위: "IT회사 기획팀 대리"
   - 거주지: "분당 정자동"
   - 월수입: "세후 400"
   - 가족구성: "남편, 5살 딸"

2. 신체/건강 상태
   - 현재 상태, 목표, 건강 이슈
   - 과거 시도, 제약사항

3. 심리/동기
   - 계기, 동기, 고민, 두려움, 기대

4. 정보 수집 패턴
   - 검색 시간, 정보원, 신뢰처, 의심처

5. 주변 환경
   - 가족, 직장, 병원, 커뮤니티, 예산

JSON 형태로 응답해주세요:
{{
  "category": "대분류",
  "speaker": {{
    "basic_info": {{}},
    "health_status": {{}},
    "psychology": {{}},
    "search_pattern": {{}},
    "environment": {{}}
  }}
}}
"""

# PHASE 2: 5개 독립 소제목 생성 프롬프트
PHASE_2_SUBTITLES_PROMPT = """
당신은 SEO 최적화 소제목 생성 전문가입니다.

주어진 키워드와 대분류를 바탕으로 5개의 독립적인 소제목을 생성해주세요.

[키워드]: {keyword}
[대분류]: {category}

[대분류별 필수 정보 영역]

다이어트 카테고리:
1. 원리/메커니즘 정보
2. 제품/방법 직접 정보
3. 식단/영양 보조 정보
4. 운동/활동 병행 정보
5. 유지/관리 장기 정보

건강/영양 카테고리:
1. 증상/원인 분석 정보
2. 제품/성분 직접 정보
3. 복용/사용법 정보
4. 생활습관 개선 정보
5. 검사/모니터링 정보

미용/시술 카테고리:
1. 시술/제품 종류 정보
2. 메인 시술 직접 정보
3. 전후 관리 정보
4. 부작용/주의 정보
5. 비용/유지 정보

[소제목 생성 규칙]
- 각각이 독립된 메인키워드가 되도록
- 구체적이고 검색 가능한 키워드
- 15-25자 이내
- 프롬프트 예시와 완전히 다르게

JSON 형태로 응답해주세요:
{{
  "subtitles": [
    "소제목1",
    "소제목2",
    "소제목3",
    "소제목4",
    "소제목5"
  ]
}}
"""

# PHASE 3: 연관키워드 40개 생성 프롬프트
PHASE_3_KEYWORDS_PROMPT = """
당신은 SEO 키워드 확장 전문가입니다.

주어진 메인키워드를 중심으로 40개의 연관키워드를 생성해주세요.

[메인키워드]: {keyword}
[소제목들]: {subtitles}

[키워드 확장 매트릭스]

Layer 1: 직접 연관 (10개)
- 동일 제품군
- 경쟁 제품
- 대체 제품
- 상위 카테고리

Layer 2: 기능 연관 (10개)
- 주요 효능
- 작용 원리
- 사용 방법
- 부작용

Layer 3: 정보 연관 (10개)
- 가격/비용
- 구매처
- 비교 정보
- 선택 기준

Layer 4: 보조 연관 (10개)
- 함께 하는 것
- 준비 사항
- 주의 사항
- 관리 방법

JSON 형태로 응답해주세요:
{{
  "keywords": {{
    "layer1": ["키워드1", "키워드2", "..."],
    "layer2": ["키워드1", "키워드2", "..."],
    "layer3": ["키워드1", "키워드2", "..."],
    "layer4": ["키워드1", "키워드2", "..."]
  }}
}}
"""

# PHASE 4: 제목 생성 프롬프트
PHASE_4_TITLE_PROMPT = """
당신은 SEO 최적화 제목 생성 전문가입니다.

주어진 정보를 모두 압축하여 하나의 강력한 제목을 생성해주세요.

[메인키워드]: {keyword}
[소제목들]: {subtitles}
[연관키워드들]: {keywords}

[제목 구성 공식]
필수 포함:
- 메인키워드 1회
- 주요 연관키워드 1-2개
- 5개 소제목 키워드 압축
- 15-25자 이내

압축 기법:
- 조사 최소화
- 중복 의미 제거
- 핵심만 추출
- 자연스러운 연결

예시 패턴:
"메인키워드 핵심정보·세부내용, 추가키워드와 결과까지"
"제품명 가격부터 효과·방법·주의사항까지"

3개의 제목 후보를 생성해주세요.

JSON 형태로 응답해주세요:
{{
  "titles": [
    "제목후보1",
    "제목후보2",
    "제목후보3"
  ]
}}
"""

# PHASE 5: 도입부 생성 프롬프트
PHASE_5_INTRO_PROMPT = """
당신은 SEO 최적화 도입부 작성 전문가입니다.

주어진 화자 페르소나를 바탕으로 200자 도입부를 작성해주세요.

[화자 정보]: {speaker_info}
[키워드]: {keyword}

[도입부 구조 (200자)]
- 화자 소개: 50자
- 검색 계기: 50자
- 고민 상황: 50자
- 글 미리보기: 50자

[작성 패턴]
패턴 A (건강검진 계기):
"작년 가을 회사 건강검진에서 충격받았어요.
35살에 벌써 지방간 경고라니... (화자/계기)
그동안 다이어트 미루다가 진짜 시작해야겠다고
결심했죠. (고민)
병원 다니며 알게 된 정보부터
실제 체중변화까지 경험 공유할게요." (미리보기)

화자의 말투와 상황에 맞게 자연스럽게 작성해주세요.

JSON 형태로 응답해주세요:
{{
  "intro": "200자 도입부 내용"
}}
"""

# PHASE 6: 각 소제목별 본문 생성 프롬프트
PHASE_6_CONTENT_PROMPT = """
당신은 SEO 최적화 본문 작성 전문가입니다.

주어진 소제목에 대해 350자 본문을 작성해주세요.

[소제목]: {subtitle}
[화자 정보]: {speaker_info}
[연관키워드들]: {keywords}
[참조 원고]: {reference}

[본문 구조 (350자)]
- 소제목: 15자
- 도입: 30자
- 핵심정보: 150자
- 경험정보: 120자
- 연결: 35자

[필수 포함 요소]
What (정의): 정확한 명칭/용어, 기본 개념
Why (이유): 필요한 이유, 효과적인 이유
How (방법): 사용/복용 방법, 실행 단계
When (시기): 시작 시점, 효과 발현
How much (정도): 용량/용법, 가격/비용

[정보를 경험담으로 변환]
단순 정보 → 경험 추가 → 구체적 상황 → 감정과 결과

[키워드 사용 규칙]
- 메인키워드 최대 1회
- 연관키워드 자연스럽게 배치
- 동의어 활용

화자의 일관된 말투로 작성해주세요.

JSON 형태로 응답해주세요:
{{
  "content": "350자 본문 내용"
}}
"""

# PHASE 7: 마무리 생성 프롬프트
PHASE_7_CONCLUSION_PROMPT = """
당신은 SEO 최적화 마무리 작성 전문가입니다.

전체 내용을 바탕으로 50자 마무리를 작성해주세요.

[화자 정보]: {speaker_info}
[키워드]: {keyword}
[전체 내용 요약]: {content_summary}

[마무리 패턴]
패턴 A (요약형):
"6개월간 15kg 감량, 월 35만원으로 건강 되찾았어요.
고민하시는 분들 도전해보세요!"

패턴 B (조언형):
"무작정 시작보다는 충분히 알아보고 결정하세요.
저처럼 성공하실 거예요!"

패턴 C (전망형):
"이제 유지 단계인데 요요 없이 잘 지내고 있어요.
여러분도 할 수 있어요!"

화자의 톤에 맞는 마무리를 작성해주세요.

JSON 형태로 응답해주세요:
{{
  "conclusion": "50자 마무리 내용"
}}
"""

# PHASE 8: 키워드 반복 체크 및 수정 프롬프트 (간소화 버전)
PHASE_8_KEYWORD_CHECK_PROMPT = """
키워드 반복 체크 후 수정하세요.

원고: {full_content}
키워드: {keyword}

규칙: 모든 단어 최대 5회 사용

5회 초과 시 동의어로 교체:
- {keyword} → 관련 동의어 사용
- 기타 반복 단어 → 유사어 교체

JSON으로만 응답:
{{
  "corrected_content": "수정된 원고"
}}
"""

# 전체 프롬프트를 딕셔너리로 관리
STEP_BY_STEP_PROMPTS = {
    "phase_1_speaker": PHASE_1_SPEAKER_PROMPT,
    "phase_2_subtitles": PHASE_2_SUBTITLES_PROMPT,
    "phase_3_keywords": PHASE_3_KEYWORDS_PROMPT,
    "phase_4_title": PHASE_4_TITLE_PROMPT,
    "phase_5_intro": PHASE_5_INTRO_PROMPT,
    "phase_6_content": PHASE_6_CONTENT_PROMPT,
    "phase_7_conclusion": PHASE_7_CONCLUSION_PROMPT,
    "phase_8_keyword_check": PHASE_8_KEYWORD_CHECK_PROMPT,
}