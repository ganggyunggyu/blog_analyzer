from __future__ import annotations

from analyzer.request_문장해체분석기 import get_문장해체


def get_ref_prompt(ref: str) -> str:
    참조분석 = get_문장해체(ref)

    ref_prompt = f"""
    [참조원고 분석 데이터 활용 지침]
    아래 데이터는 참고 문서에서 추출한 화자/구성/스타일 분석 결과물입니다.  
    원고 생성 시 반드시 다음 조건을 반영해야 합니다.

    {참조분석}

    - "화자 지시"에 따른 인물 설정, 말투, 단어 빈도와 형태소 패턴을 살짝 변형하여 글의 형태만을 따릅니다.  
    - "구성 지시"에 따라 서론-중론-결론 흐름을 유지합니다.
    - "원고 스타일 세부사항"을 전부 반영해 문체·문단 길이·리듬감·감정선 등을 동일하게 재현합니다.  
    - JSON에 기재된 단어/형태소는 반복적으로 등장해야 하며, 실제 경험담+정보 설명이 혼합된 톤을 유지해야 합니다.  

    - 부제는 그대로 사용하나 예외 사항은 하단 참조
    - 사용자 요청에 (부제X)가 있다면 필수로 숫자만 제거 된 부제 사용

    - 부제 형식은
        1. 부제1
        2. 부제2
        ... 5개
    - 사용자 요청에 (부제X)가 있다면 필수로 숫자만 제거 된 부제 사용
    """

    return ref_prompt
