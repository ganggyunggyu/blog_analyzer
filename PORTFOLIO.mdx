---
title: "AI 블로그 콘텐츠 생성 플랫폼"
description: "5개 AI 엔진을 활용한 멀티모달 SEO 최적화 블로그 원고 자동 생성 시스템"
tags: ["FastAPI", "AI", "NLP", "MongoDB", "LLM"]
period: "2024"
role: "Backend Developer"
team: "21lab"
---

# AI 블로그 콘텐츠 생성 플랫폼

<div className="project-badges">
  <span className="badge badge-primary">FastAPI</span>
  <span className="badge badge-secondary">Multi-LLM</span>
  <span className="badge badge-success">MongoDB</span>
  <span className="badge badge-info">NLP</span>
</div>

## 프로젝트 개요

5개의 AI 엔진을 통합하여 43개 이상의 카테고리별 전문 블로그 콘텐츠를 자동 생성하는 FastAPI 기반 멀티 AI 플랫폼. 프롬프트 엔지니어링과 자연어 처리 기술을 활용하여 SEO 최적화된 고품질 원고를 생성한다.

### 핵심 가치

- **멀티 AI 엔진 통합**: GPT-4, Claude, Gemini, SOLAR, Grok 5개 엔진 동시 지원
- **카테고리 전문화**: 43개 이상의 도메인별 프롬프트 엔지니어링
- **SEO 최적화**: 네이버 블로그 상위 노출을 위한 키워드 분석 및 최적화
- **데이터 학습**: MongoDB 기반 참조 원고 학습 및 스타일 모방
- **자연스러운 글쓰기**: AI 감지 회피를 위한 인간적 글쓰기 패턴 적용

---

## 🛠 기술 스택

### Backend & Framework
```yaml
Language: Python 3.7+
Framework: FastAPI + Uvicorn
API Design: RESTful API, Async/Await
```

### AI & LLM Integration
```yaml
OpenAI: GPT-4 Turbo, GPT-5 Responses API
Anthropic: Claude Sonnet 4.5
Google: Gemini 2.5 Flash, Gemini 2.0 Flash
Upstage: SOLAR LLM
xAI: Grok 4
```

### Database & Storage
```yaml
Database: MongoDB Atlas (PyMongo)
Schema: NoSQL Document-based
Features: 카테고리별 원고 저장, 참조 원고 학습
```

### NLP & Text Processing
```yaml
Korean NLP: KoNLPy (한국어 형태소 분석)
Sentence Segmentation: KSS
Custom: 텍스트 정제, 줄바꿈 최적화, 패턴 분석
```

### DevOps & Tools
```yaml
Dependency Management: pip
Environment: .env 기반 환경변수 관리
CLI: Click 기반 커맨드라인 인터페이스
```

---

## 🎨 주요 기능

### 1️⃣ 멀티 AI 엔진 통합

각 AI 엔진의 장점을 활용한 선택적 콘텐츠 생성

<div className="feature-grid">

**GPT-4 Turbo**
- 높은 일관성과 논리성
- 복잡한 컨텍스트 이해

**Claude Sonnet 4.5**
- 자연스러운 한국어 생성
- 창의적 표현력

**Gemini 2.5 Flash**
- 빠른 응답 속도
- 비용 효율성

**SOLAR LLM**
- 한국어 특화 모델
- 로컬 문화 이해

**Grok 4**
- 독특한 톤 앤 매너
- 유머러스한 표현

</div>

### 2️⃣ 카테고리별 전문 프롬프트 엔지니어링

**43개 이상의 도메인별 맞춤 프롬프트**로 전문성 확보

```python
# 카테고리 예시
categories = [
    "위고비", "마운자로", "다이어트", "다이어트보조제",
    "미용학원", "공항_장기주차장", "울쎄라", "리쥬란",
    "라미네이트", "안과", "맛집", "가구", "인테리어",
    # ... 총 43개 이상
]
```

각 카테고리별로:
- ✅ 메인/서브 키워드 정의
- ✅ 금지사항 및 필수사항 명시
- ✅ 페르소나 및 말투 설정
- ✅ 작성 팁 및 SEO 최적화 규칙

### 3️⃣ SEO 최적화 자동화

네이버 블로그 상위 노출을 위한 체계적 최적화

<div className="seo-features">

**키워드 최적화**
- 메인 키워드 4회 반복 (제목)
- 자연스러운 키워드 배치
- 연관 키워드 통합

**원고 구조 최적화**
- 5개 소제목 구조
- 섹션별 적정 글자 수 (2000-2300자)
- 모바일 가독성 최적화

**AI 감지 회피**
- 반복 어미 패턴 제거
- 인간적 감정 표현 추가
- 자연스러운 줄바꿈 규칙

</div>

### 4️⃣ 참조 원고 학습 시스템

MongoDB 기반 참조 원고 분석 및 스타일 모방

```python
# 참조 원고 학습 프로세스
1. 텍스트 분석
   - 형태소 분석 (KoNLPy)
   - 문장 패턴 추출
   - 어휘 빈도 분석

2. 스타일 학습
   - 말투 및 톤 분석
   - 문장 구조 패턴
   - 표현 방식 학습

3. 원고 생성
   - 학습된 스타일 적용
   - 참조 원고 흐름 준수
   - 독창성 유지
```

### 5️⃣ 텍스트 분석 및 후처리

자연어 처리 기반 고도화된 텍스트 처리 파이프라인

```python
# 텍스트 처리 파이프라인
text = format_paragraphs(text)           # 문단 포맷팅
text = comprehensive_text_clean(text)    # 텍스트 정제
text = apply_line_break(text)            # 줄바꿈 최적화
```

- **형태소 분석**: KoNLPy를 활용한 한국어 형태소 분석
- **문장 분할**: KSS 기반 정확한 문장 단위 분할
- **패턴 제거**: AI 감지 패턴, 특수문자, HTML/마크다운 제거
- **줄바꿈 최적화**: 모바일 가독성을 위한 30-35자 단위 줄바꿈

### 6️⃣ 다양한 생성 모드

사용자 니즈에 맞는 유연한 원고 생성

<div className="generation-modes">

**단계별 생성 (Step-by-Step)**
- 서론 → 본론 → 결론 순차 생성
- 각 단계별 검수 및 수정 가능
- 맥락 유지 보장

**청크 분할 생성 (Chunk)**
- 긴 원고를 여러 청크로 분할
- 부분별 병렬 생성
- 생성 속도 향상

**통합 생성 (KKK)**
- 멀티 AI 엔진 동시 활용
- 최적의 엔진 자동 선택
- 품질과 속도 균형

</div>

---

## 🏗 시스템 아키텍처

### 전체 구조

```
┌─────────────────────────────────────────────────────────────┐
│                         FastAPI Server                       │
│                         (Uvicorn)                            │
└───────────────────────┬─────────────────────────────────────┘
                        │
        ┌───────────────┴───────────────┐
        │                               │
┌───────▼───────┐              ┌───────▼────────┐
│   Routers     │              │   Services     │
│   (30+ APIs)  │              │   (30+ LLMs)   │
└───────┬───────┘              └───────┬────────┘
        │                               │
        └───────────────┬───────────────┘
                        │
        ┌───────────────┴────────────────┐
        │                                │
┌───────▼────────┐            ┌─────────▼────────┐
│   AI Engines   │            │    MongoDB       │
│   (5 Models)   │            │    (Atlas)       │
└────────────────┘            └──────────────────┘
```

### 모듈 구조

```
blog_analyzer/
├── 🌐 api.py                    # FastAPI 앱 진입점
├── 🔧 config.py                 # AI 클라이언트 설정
├── 💾 mongodb_service.py        # MongoDB 연결 서비스
│
├── 📡 routers/                  # API 라우터 (30+ 개)
│   ├── generate/                # 원고 생성 엔드포인트
│   ├── analysis/                # 텍스트 분석
│   ├── category/                # 카테고리 관리
│   └── ref/                     # 참조 원고 조회
│
├── 🤖 llm/                      # LLM 서비스 로직 (30+ 개)
│   ├── gpt_4_v2_service.py
│   ├── claude_service.py
│   ├── gemini_service.py
│   ├── grok_service.py
│   ├── solar_service.py
│   └── kkk_service.py           # 멀티 AI 통합
│
├── 📝 _prompts/                 # 프롬프트 엔지니어링
│   ├── category/                # 카테고리별 (43+ 개)
│   ├── service/                 # 서비스 프롬프트
│   └── rules/                   # 작성 규칙
│       ├── anti_ai_writing_patterns.py
│       ├── human_writing_style.py
│       ├── line_break_rules.py
│       └── taboo_rules.py
│
├── 🔍 analyzer/                 # 텍스트 분석 모듈
│   ├── sentence.py              # 문장 분석
│   ├── morpheme.py              # 형태소 분석
│   ├── subtitle.py              # 소제목 추출
│   ├── expression.py            # 표현 패턴
│   └── template.py              # 템플릿 생성
│
├── 🎨 ai_lib/                   # AI 라이브러리
│   └── line_break_service.py    # 줄바꿈 최적화
│
├── 🛠 utils/                    # 유틸리티
│   ├── ai_client_factory.py     # AI 클라이언트 팩토리
│   ├── text_cleaner.py          # 텍스트 정제
│   ├── format_paragraphs.py     # 문단 포맷팅
│   ├── query_parser.py          # 쿼리 파싱
│   └── natural_break_text.py    # 텍스트 분할
│
└── 📦 schema/                   # Pydantic 스키마
    ├── generate.py              # 생성 요청
    └── analysis.py              # 분석 요청
```

---

## 💡 핵심 구현 사항

### 1. 멀티 AI 클라이언트 팩토리 패턴

여러 AI 엔진을 통합 관리하는 팩토리 패턴 구현

```python
# config.py
from openai import OpenAI
from anthropic import Anthropic
from xai_sdk import Client
import google.generativeai as genai

# 환경변수 로드
load_dotenv()

# 클라이언트 초기화
openai_client = OpenAI(api_key=os.getenv("OPENAI_API_KEY"))
claude_client = Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))
grok_client = Client(api_key=os.getenv("GROK_API_KEY"), timeout=3600)
genai.configure(api_key=os.getenv("GEMINI_API_KEY"))
solar_client = OpenAI(
    api_key=os.getenv("UPSTAGE_API_KEY"),
    base_url="https://api.upstage.ai/v1/solar"
)
```

### 2. 비동기 처리 최적화

FastAPI의 `run_in_threadpool`을 활용한 동기 함수 비동기 처리

```python
# routers/generate/grok.py
from fastapi import APIRouter
from fastapi.concurrency import run_in_threadpool

@router.post("/grok/generate")
async def generate_with_grok(request: GenerateRequest):
    """Grok AI로 원고 생성 (비동기)"""
    result = await run_in_threadpool(
        grok_gen,
        request.keyword,
        request.ref,
        request.service
    )
    return {"content": result}
```

### 3. 프롬프트 엔지니어링 시스템

카테고리별 전문 프롬프트 + 공통 규칙 + 참조 원고 통합

```python
# llm/grok_service.py
def grok_gen(user_instructions: str, ref: str = "", category: str = "") -> str:
    # 1. 카테고리별 톤 규칙 로드
    category_tone_rules = get_category_tone_rules(category)

    # 2. MongoDB 데이터 통합
    mongo_data = get_mongo_prompt(category, user_instructions)

    # 3. 참조 원고 통합
    ref_prompt = get_ref_prompt(ref) if ref else ""

    # 4. 시스템 프롬프트 구성
    system_prompt = f"""
당신은 네이버 블로그 상위 노출을 위한 바이럴 마케터입니다.

# 카테고리별 규칙
{category_tone_rules}

# MongoDB 학습 데이터
{mongo_data}

# 참조 원고
{ref_prompt}

# 공통 작성 규칙
{anti_ai_writing_patterns}
{human_writing_style}
{line_break_rules}
{taboo_rules}
"""

    # 5. AI 호출
    response = grok_client.chat.completions.create(
        model="grok-beta",
        messages=[
            {"role": "system", "content": system_prompt},
            {"role": "user", "content": user_instructions}
        ]
    )

    # 6. 후처리
    text = response.choices[0].message.content
    text = format_paragraphs(text)
    text = comprehensive_text_clean(text)
    text = apply_line_break(text)

    return text
```

### 4. MongoDB 문서 구조 설계

원고 생성 이력 및 학습 데이터 저장

```python
# MongoDB Document Schema
{
    "_id": ObjectId("..."),
    "content": "생성된 원고 전문...",
    "timestamp": 1234567890.123,
    "engine": "grok-4",              # AI 엔진
    "service": "맛집",                # 카테고리
    "category": "restaurant",        # DB 이름
    "keyword": "강남 맛집 추천",      # 키워드
    "ref": "참조원고...",             # 참조 원고 (선택)
    "metadata": {
        "char_count": 2150,
        "token_count": {
            "input": 1500,
            "output": 800
        }
    }
}
```

### 5. 텍스트 후처리 파이프라인

AI 원고의 품질을 향상시키는 다단계 처리

```python
# ai_lib/line_break_service.py
def apply_line_break(text: str, model_name: str) -> str:
    """
    줄바꿈 규칙 적용
    - 한 줄당 30-35자 제한
    - 2-4문장마다 두 줄 줄바꿈
    - 소제목 후 두 줄 줄바꿈
    - 마침표/쉼표 제거 (예외: 소제목, 단위)
    """
    system_prompt = f"""
{line_break_rules}

## 중요 지침
- 한 줄당 30~35자로 제한
- 2~4번째 문장마다 두 줄 줄바꿈
- 소제목 하단 두 줄 줄바꿈
- 마침표 및 쉼표 제거 (예외: 소제목, 단위)
- 자연스러움 최우선
"""

    # AI로 줄바꿈 최적화
    optimized = call_ai(system_prompt, text, model_name)
    return optimized
```

---

## 🎯 프롬프트 엔지니어링 전략

### Anti-AI Writing Patterns

AI가 생성한 글임을 감지하기 어렵게 하는 규칙

<div className="prompt-rules">

**반복 어미 회피**
```python
# ❌ 나쁜 예
"~했어요. ~했어요. ~했어요."

# ✅ 좋은 예
"~했어요. ~하더라구요. ~한 것 같아요."
```

**감정 표현 다양화**
```python
# ❌ 나쁜 예
"좋았습니다. 좋았습니다."

# ✅ 좋은 예
"정말 만족스러웠어요! 대박이더라고요 ㅎㅎ"
```

**자연스러운 흐름**
```python
# ❌ 나쁜 예
"첫째, 둘째, 셋째..."

# ✅ 좋은 예
"먼저, 그리고, 또한, 마지막으로..."
```

</div>

### Human Writing Style

인간적인 글쓰기 스타일 모방

```python
human_writing_style = """
1. 페르소나 설정
   - 20-30대 직장인/주부
   - 친근하고 솔직한 말투
   - 경험 중심 서술

2. 감정 표현
   - 이모티콘 적절히 사용 (ㅎㅎ, ㅠㅠ)
   - 감탄사 활용 (와, 헐, 대박)
   - 주관적 느낌 표현

3. 구어체 활용
   - ~더라고요, ~한 것 같아요
   - ~했거든요, ~하더라구요
   - 자연스러운 문장 연결

4. 구체적 디테일
   - 시간, 날짜, 장소 명시
   - 수치 및 스펙 구체화
   - 개인적 경험 공유
"""
```

### Line Break Rules

모바일 가독성을 위한 줄바꿈 최적화

```python
line_break_rules = """
## 줄바꿈 규칙

1. 한 줄 길이
   - 30-35자로 제한
   - 모바일 화면 최적화
   - 자연스러운 끊기

2. 두 줄 줄바꿈 타이밍
   - 2-4문장마다 적용
   - 소제목 후 적용
   - 문단 전환 시 적용

3. 예외 사항
   - 소제목의 마침표는 유지
   - 단위 표기는 유지 (10kg, 30분)
   - 나열 시 쉼표는 유지
"""
```

---

## 📊 성과 & 특징

### 정량적 성과

<div className="metrics-grid">

**43+**
카테고리별 전문 프롬프트

**5개**
멀티 AI 엔진 통합

**30+**
API 엔드포인트

**2000-2300자**
최적화된 원고 길이

</div>

### 기술적 특징

✅ **확장 가능한 아키텍처**
- 모듈화된 구조로 새로운 AI 엔진 추가 용이
- 카테고리별 독립적 프롬프트 관리
- 플러그인 방식의 서비스 확장

✅ **고도화된 프롬프트 엔지니어링**
- 43개 이상 카테고리별 전문 프롬프트
- AI 감지 회피를 위한 다층 규칙
- 참조 원고 학습 및 스타일 모방

✅ **비동기 처리 최적화**
- FastAPI의 async/await 활용
- run_in_threadpool로 동기 함수 비동기 처리
- 병렬 생성 지원 (청크 모드)

✅ **자연어 처리 통합**
- KoNLPy 한국어 형태소 분석
- KSS 문장 분할
- 커스텀 텍스트 정제 파이프라인

✅ **MongoDB 기반 학습 시스템**
- 카테고리별 원고 이력 저장
- 참조 원고 스타일 학습
- 생성 품질 추적

---

## 🚀 기술적 도전과 해결

### 1️⃣ 멀티 AI 엔진 통합

**문제**: 각 AI 엔진마다 다른 API 스펙, 응답 형식, 에러 처리

**해결**:
```python
# 통합 클라이언트 팩토리 패턴
def call_ai(system_prompt: str, user_prompt: str, engine: str):
    if engine.startswith("gpt"):
        return call_openai(system_prompt, user_prompt)
    elif engine.startswith("claude"):
        return call_claude(system_prompt, user_prompt)
    elif engine.startswith("gemini"):
        return call_gemini(system_prompt, user_prompt)
    # ... 각 엔진별 래퍼 함수
```

### 2️⃣ AI 감지 회피

**문제**: AI가 생성한 글은 반복적 패턴으로 쉽게 감지됨

**해결**:
- 어미 다양성 강제 (요/다/죠 등 20+ 종류)
- 감정 표현 자연스럽게 삽입
- 인간적 실수 패턴 모방 (오타, 이모티콘)
- 문장 길이 변화 (짧은 문장 + 긴 문장 혼합)

### 3️⃣ SEO 최적화 vs 자연스러움

**문제**: 키워드 반복과 자연스러운 글쓰기 사이 균형

**해결**:
```python
seo_balance = """
1. 키워드 배치
   - 제목에 4회 자연스럽게 반복
   - 소제목에 1-2회 포함
   - 본문에 자연스럽게 녹여내기

2. 강제하지 않기
   - 어색한 키워드 반복 금지
   - 맥락에 맞게 변형 사용
   - 동의어/유사어 활용
"""
```

### 4️⃣ 참조 원고 스타일 학습

**문제**: 참조 원고의 스타일을 어떻게 학습하고 모방할 것인가

**해결**:
```python
def analyze_reference_style(ref: str) -> dict:
    """참조 원고 스타일 분석"""
    return {
        "sentence_patterns": extract_sentence_patterns(ref),
        "vocabulary": analyze_vocabulary(ref),
        "tone": detect_tone(ref),
        "structure": analyze_structure(ref),
        "expressions": extract_common_expressions(ref)
    }

def apply_style(content: str, style: dict) -> str:
    """학습한 스타일 적용"""
    prompt = f"""
참조 원고 스타일 분석 결과:
{style}

위 스타일을 따라 다음 내용을 재작성:
{content}
"""
    return generate_with_style(prompt)
```

### 5️⃣ 모바일 가독성 최적화

**문제**: 블로그는 대부분 모바일에서 읽힘

**해결**:
- 30-35자 단위 자동 줄바꿈
- 2-4문장마다 두 줄 줄바꿈 (여백)
- 짧은 문단 위주 작성
- 이모티콘/감정 표현으로 시각적 포인트

---

## 🔧 개발 환경 & 실행 방법

### Prerequisites

```bash
Python 3.7+
MongoDB Atlas (또는 로컬 MongoDB)
AI API Keys (OpenAI, Anthropic, Google, Upstage, xAI)
```

### 환경 설정

```bash
# 1. 레포지토리 클론
git clone <repository-url>
cd blog_analyzer

# 2. 가상환경 생성 및 활성화
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 3. 의존성 설치
pip install -r requirements.txt

# 4. 환경변수 설정 (.env 파일 생성)
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...
GEMINI_API_KEY=...
UPSTAGE_API_KEY=...
GROK_API_KEY=...
MONGO_URI=mongodb+srv://...
MONGO_DB_NAME=blog_analyzer
```

### 서버 실행

```bash
# FastAPI 서버 실행
uvicorn api:app --reload --host 0.0.0.0 --port 8000
```

### API 테스트

```bash
# 원고 생성 API 호출
curl -X POST "http://localhost:8000/grok/generate" \
  -H "Content-Type: application/json" \
  -d '{
    "service": "맛집",
    "keyword": "강남 맛집 추천",
    "ref": ""
  }'
```

---

## 📝 프로젝트에서 배운 점

### 1. 프롬프트 엔지니어링의 중요성

단순히 AI에게 "블로그 글을 써줘"라고 하는 것이 아니라:
- 카테고리별 전문 지식 주입
- 말투와 톤 세밀하게 조정
- 금지사항/필수사항 명확히 명시
- 예시와 패턴 제시

이렇게 **체계적인 프롬프트 엔지니어링**이 결과물의 품질을 결정한다는 것을 배웠습니다.

### 2. 멀티 AI 엔진 활용 전략

각 AI 엔진은 고유한 특성이 있습니다:
- GPT-4: 논리적이고 일관성 있는 글
- Claude: 창의적이고 자연스러운 표현
- Gemini: 빠르고 비용 효율적
- SOLAR: 한국어 특화
- Grok: 독특한 개성

**상황에 맞게 적절한 엔진을 선택**하는 것이 중요합니다.

### 3. AI 감지 회피의 필요성

AI가 작성한 글은 특정 패턴으로 쉽게 감지됩니다:
- 반복적인 문장 구조
- 지나치게 정제된 표현
- 감정 표현 부족

**인간적인 불완전함**을 의도적으로 넣어야 자연스러운 글이 됩니다.

### 4. 비동기 처리의 중요성

AI API 호출은 시간이 오래 걸리므로:
- FastAPI의 async/await 적극 활용
- run_in_threadpool로 동기 함수 래핑
- 병렬 처리로 성능 향상

**적절한 비동기 처리**가 사용자 경험을 크게 개선합니다.

### 5. 데이터 기반 학습의 효과

참조 원고를 MongoDB에 저장하고 학습함으로써:
- 기존 스타일 모방 가능
- 카테고리별 패턴 축적
- 지속적인 품질 개선

**데이터 기반 접근**이 AI 성능 향상의 핵심입니다.

---

## 🔗 관련 링크

<div className="links-grid">

**📦 Repository**
[GitHub](your-repo-url)

**📚 Documentation**
[API Docs](http://localhost:8000/docs)

**🎨 Project Board**
[Notion](your-notion-url)

</div>

---

## 👤 Contact

**Developer**: Gang Gyung Gyu
**Team**: 21lab
**Role**: Backend Developer
**Period**: 2024

---

<div className="tech-stack-footer">
  <img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white" />
  <img src="https://img.shields.io/badge/FastAPI-009688?style=for-the-badge&logo=fastapi&logoColor=white" />
  <img src="https://img.shields.io/badge/MongoDB-47A248?style=for-the-badge&logo=mongodb&logoColor=white" />
  <img src="https://img.shields.io/badge/OpenAI-412991?style=for-the-badge&logo=openai&logoColor=white" />
  <img src="https://img.shields.io/badge/Claude-E66B00?style=for-the-badge&logo=anthropic&logoColor=white" />
</div>

---

> **이 프로젝트는 5개의 AI 엔진을 통합하여 43개 이상의 카테고리별 전문 블로그 콘텐츠를 자동 생성하는 멀티모달 AI 플랫폼입니다. 프롬프트 엔지니어링과 자연어 처리 기술을 활용하여 SEO 최적화된 고품질 원고를 생성합니다.**
